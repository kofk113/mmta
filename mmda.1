'\" t
.\"     Title: mmda
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.76.1 <http://docbook.sf.net/>
.\"      Date: 02/07/2013
.\"    Manual: \ \&
.\"    Source: \ \&
.\"  Language: English
.\"
.TH "MMDA" "1" "02/07/2013" "\ \&" "\ \&"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
mmda \- a minimal mail delivery agent
.SH "SYNOPSIS"
.sp
mmda < deliver | forward | send > <username>
.SH "DESCRIPTION"
.sp
mmda is a local delivery helper program for the mmta mail transfer agent\&. It needs to store messages to the mailboxes and maildirs of the receiving user and thus should be installed setuid root\&.
.sp
mmda reads an email message from standard input and either delivers it to a given local user honoring the users \&.forward file (\fIdeliver\fR and \fIforward\fR subcommands) or tries to send the mailqueue of the given user using external programs (\fIsend\fR subcommand)\&.
.sp
The addresses to which messages could not be delivered are printed to standard output and should be taken care of by then higher level program, i\&.e\&. mmta\&.
.SH "SUBCOMMANDS"
.PP
deliver
.RS 4
Delivers mail to a local user honoring the contents of users \&.forward file\&. If the message is forwarded to an external host (i\&.e\&. \&.forward contains a line of type
user@external\&.org), then the message is put into the mail queue of the user using the external
\fIqueue\-mail\fR
command (or script) which is read from either local or global configuration directory\&. Local delivery is made to an mbox\-style local mailbox to /var/mail/username\&. If this mailbox does not exist, it is created\&.
.RE
.PP
forward
.RS 4
Same as
\fIdeliver\fR, but an attempt at sending the mail queue of the receiving user is made immediately after delivery\&.
.RE
.PP
send
.RS 4
Attempt to send the mail queue of the given user by using the
\fIsend\-queue\fR
command obtained from the configuration\&.
.RE
.SH "EXIT STATUS"
.PP
0
.RS 4
Successful execution\&.
.RE
.PP
1
.RS 4
Wrong number of command line arguments given\&.
.RE
.PP
2
.RS 4
<username> is a privileged user (uid < 1000)\&.
.RE
.PP
3
.RS 4
<username> is invalid\&.
.RE
.PP
4
.RS 4
Dropping of root privileges was not successful\&.
.RE
.SH "CONFIGURATION FILES"
.sp
$HOME/\&.config/mmta/can\-send $HOME/\&.config/mmta/queue\-mail $HOME/\&.config/mmta/send\-queue /etc/mmta/can\-send /etc/mmta/queue\-mail /etc/mmta/send\-queue
.SH "SEE ALSO"
.sp
forward(5), sendmail(1), safecat(1), dotlockfile(1)
